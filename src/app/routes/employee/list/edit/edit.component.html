<div class="modal-header">
  <div class="modal-title" *ngIf="record.id > 0; else addNew">{{ 'title.employee.edit' | i18n }} {{ record.name }}</div>
  <ng-template #addNew>
    <div class="modal-title">{{ 'title.employee.add' | i18n }}</div>
  </ng-template>
</div>
<!-- <nz-spin *ngIf="!i" class="modal-spin"></nz-spin> -->
<!-- <sf *ngIf="i" #sf mode="edit" [schema]="schema" [ui]="ui" [formData]="i" button="none">
  <div class="modal-footer">
    <button nz-button type="button" (click)="close()">关闭</button>
    <button nz-button type="submit" nzType="primary" (click)="save(sf.value)" [disabled]="!sf.valid" [nzLoading]="http.loading">保存</button>
  </div>
</sf> -->

<form nz-form [formGroup]="employeeForm" [nzLayout]="'horizontal'">
  <nz-row [nzGutter]="{ xs: 8, sm: 8, md: 8, lg: 24, xl: 48, xxl: 48 }">
    <nz-col [nzMd]="12" [nzSm]="24">
      <nz-form-item>
        <nz-form-label [nzMd]="8" [nzSm]="24" nzRequired nzFor="name">Name </nz-form-label>
        <nz-form-control [nzMd]="16" [nzSm]="24">
          <input nz-input formControlName="name" id="name" />
          <nz-form-explain *ngIf="employeeForm.get('name')?.dirty && employeeForm.get('name')?.errors">
            The input is invalid.
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
    </nz-col>

    <nz-col [nzMd]="12" [nzSm]="24">
      <nz-form-item>
        <nz-form-label [nzMd]="8" [nzSm]="24" nzRequired nzFor="gender">Gender </nz-form-label>
        <nz-form-control [nzMd]="16" [nzSm]="24">
          <nz-select formControlName="gender" name="gender">
            <nz-option nzValue="male" nzLabel="Male"></nz-option>
            <nz-option nzValue="female" nzLabel="Female"></nz-option>
          </nz-select>
          <nz-form-explain *ngIf="employeeForm.get('gender')?.dirty && employeeForm.get('gender')?.errors">
            The input is invalid.
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
    </nz-col>

    <nz-col [nzMd]="12" [nzSm]="24">
      <nz-form-item>
        <nz-form-label [nzMd]="8" [nzSm]="24" nzRequired nzFor="age">Age</nz-form-label>
        <nz-form-control [nzMd]="16" [nzSm]="24">
          <input nz-input formControlName="age" id="age" />
          <nz-form-explain *ngIf="employeeForm.get('age')?.dirty && employeeForm.get('age')?.errors">
            The input is invalid.
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
    </nz-col>

    <nz-col [nzMd]="12" [nzSm]="24">
      <nz-form-item>
        <nz-form-label [nzMd]="8" [nzSm]="24" nzRequired nzFor="position">Position </nz-form-label>
        <nz-form-control [nzMd]="16" [nzSm]="24">
          <input nz-input formControlName="position" id="position" />
          <nz-form-explain *ngIf="employeeForm.get('position')?.dirty && employeeForm.get('position')?.errors">
            The input is invalid.
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
    </nz-col>

    <nz-col [nzMd]="12" [nzSm]="24">
      <nz-form-item>
        <nz-form-label [nzMd]="8" [nzSm]="24" nzRequired nzFor="entry_time">Entry Time </nz-form-label>
        <nz-form-control [nzMd]="16" [nzSm]="24">
          <nz-date-picker formControlName="entry_time"></nz-date-picker>
          <nz-form-explain *ngIf="employeeForm.get('entry_time')?.dirty && employeeForm.get('entry_time')?.errors">
            The input is invalid.
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
    </nz-col>

    <nz-col [nzMd]="12" [nzSm]="24">
      <nz-form-item>
        <nz-form-label [nzMd]="8" [nzSm]="24" nzRequired nzFor="role">Role </nz-form-label>
        <nz-form-control [nzMd]="16" [nzSm]="24">
          <input nz-input formControlName="role" id="role" />
          <nz-form-explain *ngIf="employeeForm.get('role')?.dirty && employeeForm.get('role')?.errors">
            The input is invalid.
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
    </nz-col>

    <nz-col [nzMd]="12" [nzSm]="24">
      <nz-form-item>
        <nz-form-label [nzMd]="8" [nzSm]="24" nzFor="date_of_birth">DOB</nz-form-label>
        <nz-form-control [nzMd]="16" [nzSm]="24">
          <nz-date-picker formControlName="date_of_birth"></nz-date-picker>
          <nz-form-explain
            *ngIf="employeeForm.get('date_of_birth')?.dirty && employeeForm.get('date_of_birth')?.errors"
          >
            The input is invalid.
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
    </nz-col>

    <nz-col [nzMd]="12" [nzSm]="24">
      <nz-form-item>
        <nz-form-label [nzMd]="8" [nzSm]="24" nzRequired nzFor="national_id_number">ID No.</nz-form-label>
        <nz-form-control [nzMd]="16" [nzSm]="24">
          <input nz-input formControlName="national_id_number" id="national_id_number" />
          <nz-form-explain
            *ngIf="employeeForm.get('national_id_number')?.dirty && employeeForm.get('national_id_number')?.errors"
          >
            The input is invalid.
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
    </nz-col>

    <nz-col [nzMd]="12" [nzSm]="24">
      <nz-form-item>
        <nz-form-label [nzMd]="8" [nzSm]="24" nzFor="marital_status">Marital Status </nz-form-label>
        <nz-form-control [nzMd]="16" [nzSm]="24">
          <input nz-input formControlName="marital_status" id="marital_status" />
        </nz-form-control>
      </nz-form-item>
    </nz-col>

    <nz-col [nzMd]="12" [nzSm]="24">
      <nz-form-item>
        <nz-form-label [nzMd]="8" [nzSm]="24" nzRequired nzFor="status">Status </nz-form-label>
        <nz-form-control [nzMd]="16" [nzSm]="24">
          <input nz-input formControlName="status" id="status" />
          <nz-form-explain *ngIf="employeeForm.get('status')?.dirty && employeeForm.get('status')?.errors">
            The input is invalid.
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
    </nz-col>

    <nz-col [nzMd]="24" [nzSm]="24">
      <nz-form-item>
        <nz-form-label [nzMd]="4" [nzSm]="24" nzFor="address">Address </nz-form-label>
        <nz-form-control [nzMd]="20" [nzSm]="24">
          <input nz-input formControlName="address" id="address" />
        </nz-form-control>
      </nz-form-item>
    </nz-col>

    <nz-col [nzMd]="24" [nzSm]="24">
      <nz-form-item>
        <nz-form-label [nzMd]="4" [nzSm]="24" nzFor="notes">Note </nz-form-label>
        <nz-form-control [nzMd]="20" [nzSm]="24">
          <textarea formControlName="notes" nz-input rows="2" placeholder="write any thing"></textarea>
        </nz-form-control>
      </nz-form-item>
    </nz-col>

    <nz-col [nzMd]="24" [nzSm]="24">
      <nz-form-item>
        <nz-form-label [nzMd]="4" [nzSm]="24" nzFor="doc">Document </nz-form-label>
        <nz-form-control [nzMd]="5" [nzSm]="24">
          <nz-upload [nzFileList]="fileList" [nzBeforeUpload]="beforeUpload" [nzShowUploadList]="false">
            <button nz-button><i nz-icon nzType="upload"></i><span>Select File</span></button>
          </nz-upload>
          <!-- <textarea formControlName="notes" nz-input rows="2" placeholder="write any thing"></textarea> -->
          <!-- <input nz-input formControlName="description" id="description" />
            <nz-form-explain *ngIf="employeeForm.get('position')?.dirty && employeeForm.get('position')?.errors">
              The input is invalid.
            </nz-form-explain> -->
        </nz-form-control>
      </nz-form-item>
    </nz-col>
  </nz-row>
  <nz-table
    *ngIf="fileList.length > 0"
    #editRowTable
    nzBordered
    [nzData]="fileList"
    [nzSize]="'small'"
    [nzShowPagination]="false"
  >
    <thead>
      <tr>
        <th>File</th>
        <th>Description</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of editRowTable.data" class="editable-row">
        <td>{{ data.name }}</td>
        <td>
          <div class="editable-cell" *ngIf="data.id > 0; else editTpl">
            <div class="editable-cell-value-wrap">
              {{ data.description }}
            </div>
          </div>
          <ng-template #editTpl>
            <input type="text" nz-input [(ngModel)]="data.description" [ngModelOptions]="{ standalone: true }" />
          </ng-template>
        </td>
        <td>
          <a nz-popconfirm nzTitle="Sure to delete?" (nzOnConfirm)="deleteRow(data)">Delete</a>
        </td>
      </tr>
    </tbody>
  </nz-table>

  <div class="modal-footer">
    <button nz-button type="button" (click)="close()">Close</button>
    <button nz-button type="submit" nzType="primary" (click)="submitForm()" [nzLoading]="http.loading">Save</button>
  </div>
</form>
